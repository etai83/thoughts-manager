{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/db.ts"],"sourcesContent":["import Dexie, { type EntityTable } from 'dexie';\n\nexport interface Node {\n  id: string;\n  type: string;\n  position: { x: number; y: number };\n  data: { label: string; content?: string };\n  embedding?: number[];\n}\n\nexport interface Edge {\n  id: string;\n  source: string;\n  target: string;\n  label?: string;\n}\n\nconst db = new Dexie('ThoughtsManagerDB') as Dexie & {\n  nodes: EntityTable<Node, 'id'>;\n  edges: EntityTable<Edge, 'id'>;\n};\n\n// Schema declaration:\ndb.version(1).stores({\n  nodes: 'id, type', // primary key \"id\" (for nodes)\n  edges: 'id, source, target' // primary key \"id\" (for edges)\n});\n\nexport { db };\n"],"names":[],"mappings":";;;;AAAA;;AAiBA,MAAM,KAAK,IAAI,yJAAK,CAAC;AAKrB,sBAAsB;AACtB,GAAG,OAAO,CAAC,GAAG,MAAM,CAAC;IACnB,OAAO;IACP,OAAO,qBAAqB,+BAA+B;AAC7D"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/ollama.ts"],"sourcesContent":["import { Ollama } from 'ollama/browser';\n\nconst ollama = new Ollama({ host: 'http://localhost:11434' });\n\nexport const getEmbedding = async (text: string, model = 'all-minilm') => {\n  try {\n    const response = await ollama.embeddings({\n      model: model,\n      prompt: text,\n    });\n    return response.embedding;\n  } catch (error) {\n    console.error('Error fetching embedding from Ollama:', error);\n    // Return a dummy vector if Ollama is not available for development\n    return new Array(384).fill(0);\n  }\n};\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,SAAS,IAAI,uJAAM,CAAC;IAAE,MAAM;AAAyB;AAEpD,MAAM,eAAe,OAAO,MAAc,QAAQ,YAAY;IACnE,IAAI;QACF,MAAM,WAAW,MAAM,OAAO,UAAU,CAAC;YACvC,OAAO;YACP,QAAQ;QACV;QACA,OAAO,SAAS,SAAS;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yCAAyC;QACvD,mEAAmE;QACnE,OAAO,IAAI,MAAM,KAAK,IAAI,CAAC;IAC7B;AACF"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/vectorStore.ts"],"sourcesContent":["import { create, insert, search, type AnyOrama } from '@orama/orama';\nimport { db } from './db';\nimport { getEmbedding } from './ollama';\n\nexport interface VectorDocument {\n  id: string;\n  label: string;\n  content: string;\n  embedding: number[];\n}\n\nexport class VectorStore {\n  db: AnyOrama | null = null;\n\n  async init() {\n    this.db = await create({\n      schema: {\n        id: 'string',\n        label: 'string',\n        content: 'string',\n        embedding: 'vector[384]', \n      },\n    });\n  }\n\n  async index(doc: VectorDocument) {\n    if (!this.db) throw new Error('VectorStore not initialized');\n    await insert(this.db, doc);\n  }\n\n  async search(term: string) {\n    if (!this.db) throw new Error('VectorStore not initialized');\n    return await search(this.db, { term });\n  }\n\n  async searchByVector(vector: number[], limit = 5, similarity = 0.8) {\n    if (!this.db) throw new Error('VectorStore not initialized');\n    return await search(this.db, {\n      mode: 'vector',\n      vector: {\n        value: vector,\n        property: 'embedding',\n      },\n      similarity,\n      limit,\n    });\n  }\n\n  async syncWithDexie() {\n    const nodes = await db.nodes.toArray();\n    for (const node of nodes) {\n      let embedding = node.embedding;\n      const content = node.data.content || '';\n      const textToEmbed = `${node.data.label} ${content}`;\n\n      if (!embedding) {\n        embedding = await getEmbedding(textToEmbed);\n        // Cache in Dexie\n        await db.nodes.update(node.id, { embedding });\n      }\n      \n      await this.index({\n        id: node.id,\n        label: node.data.label,\n        content: content,\n        embedding: embedding,\n      });\n    }\n  }\n}\n\nexport const vectorStore = new VectorStore();\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AACA;AACA;;;;AASO,MAAM;IACX,KAAsB,KAAK;IAE3B,MAAM,OAAO;QACX,IAAI,CAAC,EAAE,GAAG,MAAM,IAAA,0KAAM,EAAC;YACrB,QAAQ;gBACN,IAAI;gBACJ,OAAO;gBACP,SAAS;gBACT,WAAW;YACb;QACF;IACF;IAEA,MAAM,MAAM,GAAmB,EAAE;QAC/B,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,MAAM;QAC9B,MAAM,IAAA,0KAAM,EAAC,IAAI,CAAC,EAAE,EAAE;IACxB;IAEA,MAAM,OAAO,IAAY,EAAE;QACzB,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,MAAM;QAC9B,OAAO,MAAM,IAAA,0KAAM,EAAC,IAAI,CAAC,EAAE,EAAE;YAAE;QAAK;IACtC;IAEA,MAAM,eAAe,MAAgB,EAAE,QAAQ,CAAC,EAAE,aAAa,GAAG,EAAE;QAClE,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,MAAM;QAC9B,OAAO,MAAM,IAAA,0KAAM,EAAC,IAAI,CAAC,EAAE,EAAE;YAC3B,MAAM;YACN,QAAQ;gBACN,OAAO;gBACP,UAAU;YACZ;YACA;YACA;QACF;IACF;IAEA,MAAM,gBAAgB;QACpB,MAAM,QAAQ,MAAM,yHAAE,CAAC,KAAK,CAAC,OAAO;QACpC,KAAK,MAAM,QAAQ,MAAO;YACxB,IAAI,YAAY,KAAK,SAAS;YAC9B,MAAM,UAAU,KAAK,IAAI,CAAC,OAAO,IAAI;YACrC,MAAM,cAAc,GAAG,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS;YAEnD,IAAI,CAAC,WAAW;gBACd,YAAY,MAAM,IAAA,uIAAY,EAAC;gBAC/B,iBAAiB;gBACjB,MAAM,yHAAE,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE;oBAAE;gBAAU;YAC7C;YAEA,MAAM,IAAI,CAAC,KAAK,CAAC;gBACf,IAAI,KAAK,EAAE;gBACX,OAAO,KAAK,IAAI,CAAC,KAAK;gBACtB,SAAS;gBACT,WAAW;YACb;QACF;IACF;AACF;AAEO,MAAM,cAAc,IAAI"}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/store.ts"],"sourcesContent":["import { create } from 'zustand';\nimport {\n  type Node,\n  type Edge,\n  type OnNodesChange,\n  type OnEdgesChange,\n  type OnConnect,\n  applyNodeChanges,\n  applyEdgeChanges,\n  addEdge,\n} from '@xyflow/react';\nimport { db } from './db';\nimport { vectorStore } from './vectorStore';\nimport { getEmbedding } from './ollama';\n\nexport type AppState = {\n  nodes: Node[];\n  edges: Edge[];\n  onNodesChange: OnNodesChange;\n  onEdgesChange: OnEdgesChange;\n  onConnect: OnConnect;\n  setNodes: (nodes: Node[]) => void;\n  setEdges: (edges: Edge[]) => void;\n  addNode: (node: Node) => void;\n  updateNodeData: (id: string, data: Partial<AppState['nodes'][0]['data']>) => void;\n  loadData: () => Promise<void>;\n  searchNodes: (query: string) => Promise<any[]>;\n  getRelatedNodes: (nodeId: string) => Promise<any[]>;\n};\n\nexport const useStore = create<AppState>((set, get) => ({\n  nodes: [],\n  edges: [],\n  onNodesChange: (changes) => {\n    const updatedNodes = applyNodeChanges(changes, get().nodes);\n    set({ nodes: updatedNodes });\n    \n    // Sync to Dexie\n    changes.forEach((change) => {\n      if (change.type === 'remove') {\n        db.nodes.delete(change.id);\n      } else if (change.type === 'position' && change.position) {\n        db.nodes.update(change.id, { position: change.position });\n      }\n    });\n  },\n  onEdgesChange: (changes) => {\n    const updatedEdges = applyEdgeChanges(changes, get().edges);\n    set({ edges: updatedEdges });\n    \n    changes.forEach((change) => {\n      if (change.type === 'remove') {\n        db.edges.delete(change.id);\n      }\n    });\n  },\n  onConnect: (connection) => {\n    const newEdges = addEdge(connection, get().edges);\n    set({ edges: newEdges });\n    \n    // Dexie sync - addEdge returns an array with the new edge added\n    const latestEdge = newEdges[newEdges.length - 1];\n    if (latestEdge) {\n      db.edges.add({\n        id: latestEdge.id,\n        source: latestEdge.source,\n        target: latestEdge.target,\n      });\n    }\n  },\n  setNodes: (nodes) => {\n    set({ nodes });\n  },\n  setEdges: (edges) => {\n    set({ edges });\n  },\n  addNode: (node) => {\n    set({ nodes: [...get().nodes, node] });\n    db.nodes.add({\n      id: node.id,\n      type: node.type || 'thought',\n      position: node.position,\n      data: node.data as { label: string; content?: string },\n    });\n  },\n  updateNodeData: (id, data) => {\n    set({\n      nodes: get().nodes.map((node) =>\n        node.id === id ? { ...node, data: { ...node.data, ...data } } : node\n      ),\n    });\n    db.nodes.update(id, { data: { ...get().nodes.find(n => n.id === id)?.data, ...data } as any });\n  },\n  loadData: async () => {\n    await vectorStore.init();\n    const nodes = await db.nodes.toArray();\n    const edges = await db.edges.toArray();\n    set({ \n      nodes: nodes.map(n => ({ ...n, data: { ...n.data } })), \n      edges \n    });\n    await vectorStore.syncWithDexie();\n  },\n  searchNodes: async (query: string) => {\n    if (!query) return [];\n    try {\n      const queryEmbedding = await getEmbedding(query);\n      const results = await vectorStore.searchByVector(queryEmbedding);\n      return results.hits.map(hit => hit.document);\n    } catch (error) {\n      console.error('Search failed:', error);\n      return [];\n    }\n  },\n  getRelatedNodes: async (nodeId: string) => {\n    const node = get().nodes.find(n => n.id === nodeId) as any;\n    if (!node || !node.embedding) return [];\n    \n    try {\n      const results = await vectorStore.searchByVector(node.embedding, 6, 0.1);\n      return results.hits\n        .filter(hit => hit.document.id !== nodeId)\n        .map(hit => hit.document);\n    } catch (error) {\n      console.error('Failed to get related nodes:', error);\n      return [];\n    }\n  },\n}));\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/components/ThoughtNode.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { Handle, Position, type NodeProps, type Node } from '@xyflow/react';\nimport ReactMarkdown from 'react-markdown';\nimport { useStore } from '@/lib/store';\n\nexport type ThoughtNodeData = {\n  label: string;\n  content?: string;\n};\n\nconst ThoughtNode = ({ id, data }: NodeProps<Node<ThoughtNodeData>>) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const updateNodeData = useStore((s) => s.updateNodeData);\n\n  const handleDoubleClick = () => {\n    setIsEditing(true);\n  };\n\n  const handleBlur = () => {\n    setIsEditing(false);\n  };\n\n  const handleChange = (evt: React.ChangeEvent<HTMLTextAreaElement>) => {\n    updateNodeData(id, { content: evt.target.value });\n  };\n\n  const handleLabelChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    updateNodeData(id, { label: evt.target.value });\n  };\n\n  return (\n    <div className=\"px-4 py-2 shadow-md rounded-md bg-white border-2 border-stone-400 min-w-[150px] text-black\">\n      <Handle type=\"target\" position={Position.Top} className=\"w-16 !bg-teal-500\" />\n      \n      <div className=\"flex flex-col text-black\">\n        {isEditing ? (\n          <>\n            <input\n              className=\"font-bold border-b mb-2 focus:outline-none text-black\"\n              value={data.label}\n              onChange={handleLabelChange}\n              autoFocus\n            />\n            <textarea\n              className=\"text-xs border rounded p-1 focus:outline-none min-h-[100px] text-black\"\n              value={data.content || ''}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n          </>\n        ) : (\n          <div onDoubleClick={handleDoubleClick} className=\"text-black\">\n            <div className=\"font-bold border-b mb-2 text-black\">{data.label}</div>\n            <div className=\"text-xs prose prose-slate max-w-none text-black\">\n              <ReactMarkdown>{data.content || 'Double click to edit...'}</ReactMarkdown>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <Handle type=\"source\" position={Position.Bottom} className=\"w-16 !bg-teal-500\" />\n    </div>\n  );\n};\n\nexport default ThoughtNode;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAYA,MAAM,cAAc,CAAC,EAAE,EAAE,EAAE,IAAI,EAAoC;;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,iBAAiB,IAAA,kIAAQ;gDAAC,CAAC,IAAM,EAAE,cAAc;;IAEvD,MAAM,oBAAoB;QACxB,aAAa;IACf;IAEA,MAAM,aAAa;QACjB,aAAa;IACf;IAEA,MAAM,eAAe,CAAC;QACpB,eAAe,IAAI;YAAE,SAAS,IAAI,MAAM,CAAC,KAAK;QAAC;IACjD;IAEA,MAAM,oBAAoB,CAAC;QACzB,eAAe,IAAI;YAAE,OAAO,IAAI,MAAM,CAAC,KAAK;QAAC;IAC/C;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,sLAAM;gBAAC,MAAK;gBAAS,UAAU,yKAAQ,CAAC,GAAG;gBAAE,WAAU;;;;;;0BAExD,6LAAC;gBAAI,WAAU;0BACZ,0BACC;;sCACE,6LAAC;4BACC,WAAU;4BACV,OAAO,KAAK,KAAK;4BACjB,UAAU;4BACV,SAAS;;;;;;sCAEX,6LAAC;4BACC,WAAU;4BACV,OAAO,KAAK,OAAO,IAAI;4BACvB,UAAU;4BACV,QAAQ;;;;;;;iDAIZ,6LAAC;oBAAI,eAAe;oBAAmB,WAAU;;sCAC/C,6LAAC;4BAAI,WAAU;sCAAsC,KAAK,KAAK;;;;;;sCAC/D,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,sMAAa;0CAAE,KAAK,OAAO,IAAI;;;;;;;;;;;;;;;;;;;;;;0BAMxC,6LAAC,sLAAM;gBAAC,MAAK;gBAAS,UAAU,yKAAQ,CAAC,MAAM;gBAAE,WAAU;;;;;;;;;;;;AAGjE;GArDM;;QAEmB,kIAAQ;;;KAF3B;uCAuDS"}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/layout.ts"],"sourcesContent":["import { forceSimulation, forceLink, forceManyBody, forceCenter } from 'd3-force';\nimport { type Node, type Edge } from '@xyflow/react';\n\nexport const runLayout = (nodes: Node[], edges: Edge[]) => {\n  const simulationNodes = nodes.map((n) => ({ ...n, x: n.position.x, y: n.position.y }));\n  const simulationLinks = edges.map((e) => ({ ...e, source: e.source, target: e.target }));\n\n  const simulation = forceSimulation(simulationNodes as any)\n    .force('link', forceLink(simulationLinks).id((d: any) => d.id).distance(100))\n    .force('charge', forceManyBody().strength(-300))\n    .force('center', forceCenter(200, 200))\n    .stop();\n\n  // Run simulation for a fixed number of ticks\n  for (let i = 0; i < 300; ++i) simulation.tick();\n\n  return nodes.map((n, i) => ({\n    ...n,\n    position: {\n      x: (simulationNodes[i] as any).x,\n      y: (simulationNodes[i] as any).y,\n    },\n  }));\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;;AAGO,MAAM,YAAY,CAAC,OAAe;IACvC,MAAM,kBAAkB,MAAM,GAAG,CAAC,CAAC,IAAM,CAAC;YAAE,GAAG,CAAC;YAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;YAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;QAAC,CAAC;IACpF,MAAM,kBAAkB,MAAM,GAAG,CAAC,CAAC,IAAM,CAAC;YAAE,GAAG,CAAC;YAAE,QAAQ,EAAE,MAAM;YAAE,QAAQ,EAAE,MAAM;QAAC,CAAC;IAEtF,MAAM,aAAa,IAAA,oNAAe,EAAC,iBAChC,KAAK,CAAC,QAAQ,IAAA,kMAAS,EAAC,iBAAiB,EAAE,CAAC,CAAC,IAAW,EAAE,EAAE,EAAE,QAAQ,CAAC,MACvE,KAAK,CAAC,UAAU,IAAA,8MAAa,IAAG,QAAQ,CAAC,CAAC,MAC1C,KAAK,CAAC,UAAU,IAAA,wMAAW,EAAC,KAAK,MACjC,IAAI;IAEP,6CAA6C;IAC7C,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,EAAE,EAAG,WAAW,IAAI;IAE7C,OAAO,MAAM,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC;YAC1B,GAAG,CAAC;YACJ,UAAU;gBACR,GAAG,AAAC,eAAe,CAAC,EAAE,CAAS,CAAC;gBAChC,GAAG,AAAC,eAAe,CAAC,EAAE,CAAS,CAAC;YAClC;QACF,CAAC;AACH"}},
    {"offset": {"line": 460, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/components/SearchBar.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useStore } from '@/lib/store';\n\nconst SearchBar: React.FC = () => {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState<any[]>([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const searchNodes = useStore((s) => s.searchNodes);\n\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(async () => {\n      if (query.trim()) {\n        setIsSearching(true);\n        const res = await searchNodes(query);\n        setResults(res);\n        setIsSearching(false);\n      } else {\n        setResults([]);\n      }\n    }, 500);\n\n    return () => clearTimeout(delayDebounceFn);\n  }, [query, searchNodes]);\n\n  return (\n    <div className=\"absolute top-4 left-1/2 -translate-x-1/2 z-[10] w-[400px]\">\n      <div className=\"relative\">\n        <input\n          type=\"text\"\n          className=\"w-full px-4 py-2 rounded-full border shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-black\"\n          placeholder=\"Semantic Search (e.g., 'productivity')...\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n        />\n        {isSearching && (\n          <div className=\"absolute right-4 top-2 text-xs text-gray-400\">Searching...</div>\n        )}\n      </div>\n\n      {results.length > 0 && (\n        <div className=\"mt-2 bg-white rounded-lg shadow-xl border overflow-hidden max-h-[300px] overflow-y-auto\">\n          {results.map((result) => (\n            <div\n              key={result.id}\n              className=\"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b last:border-0 text-black\"\n            >\n              <div className=\"font-bold text-sm\">{result.label}</div>\n              <div className=\"text-xs text-gray-500 truncate\">{result.content}</div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SearchBar;\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKA,MAAM,YAAsB;;IAC1B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAChD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,cAAc,IAAA,kIAAQ;2CAAC,CAAC,IAAM,EAAE,WAAW;;IAEjD,IAAA,0KAAS;+BAAC;YACR,MAAM,kBAAkB;uDAAW;oBACjC,IAAI,MAAM,IAAI,IAAI;wBAChB,eAAe;wBACf,MAAM,MAAM,MAAM,YAAY;wBAC9B,WAAW;wBACX,eAAe;oBACjB,OAAO;wBACL,WAAW,EAAE;oBACf;gBACF;sDAAG;YAEH;uCAAO,IAAM,aAAa;;QAC5B;8BAAG;QAAC;QAAO;KAAY;IAEvB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;oBAEzC,6BACC,6LAAC;wBAAI,WAAU;kCAA+C;;;;;;;;;;;;YAIjE,QAAQ,MAAM,GAAG,mBAChB,6LAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,6LAAC;wBAEC,WAAU;;0CAEV,6LAAC;gCAAI,WAAU;0CAAqB,OAAO,KAAK;;;;;;0CAChD,6LAAC;gCAAI,WAAU;0CAAkC,OAAO,OAAO;;;;;;;uBAJ1D,OAAO,EAAE;;;;;;;;;;;;;;;;AAW5B;GAnDM;;QAIgB,kIAAQ;;;KAJxB;uCAqDS"}},
    {"offset": {"line": 588, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/components/InsightsPanel.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useStore } from '@/lib/store';\nimport { useOnSelectionChange } from '@xyflow/react';\n\nconst InsightsPanel: React.FC = () => {\n  const [selectedNodeId, setSelectedNodeId] = useState<string | null>(null);\n  const [relatedNodes, setRelatedNodes] = useState<any[]>([]);\n  const getRelatedNodes = useStore((s) => s.getRelatedNodes);\n  const addEdge = useStore((s) => s.onConnect);\n\n  useOnSelectionChange({\n    onChange: ({ nodes }) => {\n      if (nodes.length === 1) {\n        setSelectedNodeId(nodes[0].id);\n      } else {\n        setSelectedNodeId(null);\n        setRelatedNodes([]);\n      }\n    },\n  });\n\n  useEffect(() => {\n    if (selectedNodeId) {\n      getRelatedNodes(selectedNodeId).then(setRelatedNodes);\n    }\n  }, [selectedNodeId, getRelatedNodes]);\n\n  if (!selectedNodeId) return null;\n\n  const handleConnect = (targetId: string) => {\n    addEdge({\n      source: selectedNodeId,\n      target: targetId,\n      sourceHandle: null,\n      targetHandle: null,\n    });\n  };\n\n  return (\n    <div className=\"absolute bottom-4 right-4 z-[10] w-[250px] bg-white rounded-lg shadow-xl border p-4 text-black\">\n      <h3 className=\"font-bold text-sm border-b pb-2 mb-2\">Related Thoughts</h3>\n      {relatedNodes.length === 0 ? (\n        <div className=\"text-xs text-gray-500 italic\">No similar thoughts found.</div>\n      ) : (\n        <div className=\"flex flex-col gap-2\">\n          {relatedNodes.map((node) => (\n            <div key={node.id} className=\"flex justify-between items-center bg-gray-50 p-2 rounded\">\n              <div className=\"text-xs font-medium truncate flex-1 mr-2\">{node.label}</div>\n              <button\n                onClick={() => handleConnect(node.id)}\n                className=\"text-[10px] bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition-colors\"\n              >\n                Connect\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default InsightsPanel;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,MAAM,gBAA0B;;IAC9B,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAgB;IACpE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAC1D,MAAM,kBAAkB,IAAA,kIAAQ;mDAAC,CAAC,IAAM,EAAE,eAAe;;IACzD,MAAM,UAAU,IAAA,kIAAQ;2CAAC,CAAC,IAAM,EAAE,SAAS;;IAE3C,IAAA,oMAAoB,EAAC;QACnB,QAAQ;kDAAE,CAAC,EAAE,KAAK,EAAE;gBAClB,IAAI,MAAM,MAAM,KAAK,GAAG;oBACtB,kBAAkB,KAAK,CAAC,EAAE,CAAC,EAAE;gBAC/B,OAAO;oBACL,kBAAkB;oBAClB,gBAAgB,EAAE;gBACpB;YACF;;IACF;IAEA,IAAA,0KAAS;mCAAC;YACR,IAAI,gBAAgB;gBAClB,gBAAgB,gBAAgB,IAAI,CAAC;YACvC;QACF;kCAAG;QAAC;QAAgB;KAAgB;IAEpC,IAAI,CAAC,gBAAgB,OAAO;IAE5B,MAAM,gBAAgB,CAAC;QACrB,QAAQ;YACN,QAAQ;YACR,QAAQ;YACR,cAAc;YACd,cAAc;QAChB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAuC;;;;;;YACpD,aAAa,MAAM,KAAK,kBACvB,6LAAC;gBAAI,WAAU;0BAA+B;;;;;yEAE9C,6LAAC;gBAAI,WAAU;0BACZ,aAAa,GAAG,CAAC,CAAC,qBACjB,6LAAC;wBAAkB,WAAU;;0CAC3B,6LAAC;gCAAI,WAAU;0CAA4C,KAAK,KAAK;;;;;;0CACrE,6LAAC;gCACC,SAAS,IAAM,cAAc,KAAK,EAAE;gCACpC,WAAU;0CACX;;;;;;;uBALO,KAAK,EAAE;;;;;;;;;;;;;;;;AAc7B;GAxDM;;QAGoB,kIAAQ;QAChB,kIAAQ;QAExB,oMAAoB;;;KANhB;uCA0DS"}},
    {"offset": {"line": 719, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/components/Canvas.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect } from 'react';\nimport {\n  ReactFlow,\n  Background,\n  Controls,\n  Panel,\n} from '@xyflow/react';\nimport '@xyflow/react/dist/style.css';\nimport { useStore } from '@/lib/store';\nimport ThoughtNode from './ThoughtNode';\nimport { runLayout } from '@/lib/layout';\nimport SearchBar from './SearchBar';\nimport InsightsPanel from './InsightsPanel';\n\nconst nodeTypes = {\n  thought: ThoughtNode,\n};\n\nconst Canvas: React.FC = () => {\n  const {\n    nodes,\n    edges,\n    onNodesChange,\n    onEdgesChange,\n    onConnect,\n    addNode,\n    setNodes,\n    loadData,\n  } = useStore();\n\n  useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  const handleAddNode = () => {\n    const id = Date.now().toString();\n    const newNode = {\n      id,\n      position: { x: Math.random() * 400, y: Math.random() * 400 },\n      data: { label: `Thought ${id}`, content: '' },\n      type: 'thought',\n    };\n    addNode(newNode);\n  };\n\n  const handleLayout = () => {\n    const layoutedNodes = runLayout(nodes, edges);\n    setNodes(layoutedNodes);\n  };\n\n  return (\n    <div style={{ width: '100vw', height: '100vh' }} data-testid=\"rf__wrapper\">\n      <SearchBar />\n      <ReactFlow\n        nodes={nodes}\n        edges={edges}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onConnect={onConnect}\n        nodeTypes={nodeTypes}\n        fitView\n      >\n        <Background />\n        <Controls />\n        <InsightsPanel />\n        <Panel position=\"top-right\">\n          <div className=\"flex flex-col gap-2 bg-white p-2 border rounded shadow\">\n            <button\n              onClick={handleAddNode}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors\"\n            >\n              Add Thought\n            </button>\n            <button\n              onClick={handleLayout}\n              className=\"bg-stone-500 text-white px-4 py-2 rounded hover:bg-stone-600 transition-colors\"\n            >\n              Auto Layout\n            </button>\n          </div>\n        </Panel>\n      </ReactFlow>\n    </div>\n  );\n};\n\nexport default Canvas;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAOA;AACA;AACA;AACA;AACA;;;AAdA;;;;;;;;;AAgBA,MAAM,YAAY;IAChB,SAAS,+IAAW;AACtB;AAEA,MAAM,SAAmB;;IACvB,MAAM,EACJ,KAAK,EACL,KAAK,EACL,aAAa,EACb,aAAa,EACb,SAAS,EACT,OAAO,EACP,QAAQ,EACR,QAAQ,EACT,GAAG,IAAA,kIAAQ;IAEZ,IAAA,0KAAS;4BAAC;YACR;QACF;2BAAG;QAAC;KAAS;IAEb,MAAM,gBAAgB;QACpB,MAAM,KAAK,KAAK,GAAG,GAAG,QAAQ;QAC9B,MAAM,UAAU;YACd;YACA,UAAU;gBAAE,GAAG,KAAK,MAAM,KAAK;gBAAK,GAAG,KAAK,MAAM,KAAK;YAAI;YAC3D,MAAM;gBAAE,OAAO,CAAC,QAAQ,EAAE,IAAI;gBAAE,SAAS;YAAG;YAC5C,MAAM;QACR;QACA,QAAQ;IACV;IAEA,MAAM,eAAe;QACnB,MAAM,gBAAgB,IAAA,oIAAS,EAAC,OAAO;QACvC,SAAS;IACX;IAEA,qBACE,6LAAC;QAAI,OAAO;YAAE,OAAO;YAAS,QAAQ;QAAQ;QAAG,eAAY;;0BAC3D,6LAAC,6IAAS;;;;;0BACV,6LAAC,yLAAS;gBACR,OAAO;gBACP,OAAO;gBACP,eAAe;gBACf,eAAe;gBACf,WAAW;gBACX,WAAW;gBACX,OAAO;;kCAEP,6LAAC,0LAAU;;;;;kCACX,6LAAC,wLAAQ;;;;;kCACT,6LAAC,iJAAa;;;;;kCACd,6LAAC,qLAAK;wBAAC,UAAS;kCACd,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb;GAlEM;;QAUA,kIAAQ;;;KAVR;uCAoES"}}]
}