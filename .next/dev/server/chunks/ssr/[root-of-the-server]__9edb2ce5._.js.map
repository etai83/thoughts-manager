{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/db.ts"],"sourcesContent":["import Dexie, { type EntityTable } from 'dexie';\n\nexport interface Node {\n  id: string;\n  type: string;\n  position: { x: number; y: number };\n  data: { label: string; content?: string };\n}\n\nexport interface Edge {\n  id: string;\n  source: string;\n  target: string;\n  label?: string;\n}\n\nconst db = new Dexie('ThoughtsManagerDB') as Dexie & {\n  nodes: EntityTable<Node, 'id'>;\n  edges: EntityTable<Edge, 'id'>;\n};\n\n// Schema declaration:\ndb.version(1).stores({\n  nodes: 'id, type', // primary key \"id\" (for nodes)\n  edges: 'id, source, target' // primary key \"id\" (for edges)\n});\n\nexport { db };\n"],"names":[],"mappings":";;;;AAAA;;AAgBA,MAAM,KAAK,IAAI,sJAAK,CAAC;AAKrB,sBAAsB;AACtB,GAAG,OAAO,CAAC,GAAG,MAAM,CAAC;IACnB,OAAO;IACP,OAAO,qBAAqB,+BAA+B;AAC7D"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/store.ts"],"sourcesContent":["import { create } from 'zustand';\nimport {\n  type Node,\n  type Edge,\n  type OnNodesChange,\n  type OnEdgesChange,\n  type OnConnect,\n  applyNodeChanges,\n  applyEdgeChanges,\n  addEdge,\n} from '@xyflow/react';\nimport { db } from './db';\n\nexport type AppState = {\n  nodes: Node[];\n  edges: Edge[];\n  onNodesChange: OnNodesChange;\n  onEdgesChange: OnEdgesChange;\n  onConnect: OnConnect;\n  setNodes: (nodes: Node[]) => void;\n  setEdges: (edges: Edge[]) => void;\n  addNode: (node: Node) => void;\n  updateNodeData: (id: string, data: Partial<AppState['nodes'][0]['data']>) => void;\n  loadData: () => Promise<void>;\n};\n\nexport const useStore = create<AppState>((set, get) => ({\n  nodes: [],\n  edges: [],\n  onNodesChange: (changes) => {\n    const updatedNodes = applyNodeChanges(changes, get().nodes);\n    set({ nodes: updatedNodes });\n    \n    // Sync to Dexie\n    changes.forEach((change) => {\n      if (change.type === 'remove') {\n        db.nodes.delete(change.id);\n      } else if (change.type === 'position' && change.position) {\n        db.nodes.update(change.id, { position: change.position });\n      }\n    });\n  },\n  onEdgesChange: (changes) => {\n    const updatedEdges = applyEdgeChanges(changes, get().edges);\n    set({ edges: updatedEdges });\n    \n    changes.forEach((change) => {\n      if (change.type === 'remove') {\n        db.edges.delete(change.id);\n      }\n    });\n  },\n  onConnect: (connection) => {\n    const newEdges = addEdge(connection, get().edges);\n    set({ edges: newEdges });\n    \n    // Dexie sync - addEdge returns an array with the new edge added\n    const latestEdge = newEdges[newEdges.length - 1];\n    if (latestEdge) {\n      db.edges.add({\n        id: latestEdge.id,\n        source: latestEdge.source,\n        target: latestEdge.target,\n      });\n    }\n  },\n  setNodes: (nodes) => {\n    set({ nodes });\n  },\n  setEdges: (edges) => {\n    set({ edges });\n  },\n  addNode: (node) => {\n    set({ nodes: [...get().nodes, node] });\n    db.nodes.add({\n      id: node.id,\n      type: node.type || 'thought',\n      position: node.position,\n      data: node.data as { label: string; content?: string },\n    });\n  },\n  updateNodeData: (id, data) => {\n    set({\n      nodes: get().nodes.map((node) =>\n        node.id === id ? { ...node, data: { ...node.data, ...data } } : node\n      ),\n    });\n    db.nodes.update(id, { data: { ...get().nodes.find(n => n.id === id)?.data, ...data } as any });\n  },\n  loadData: async () => {\n    const nodes = await db.nodes.toArray();\n    const edges = await db.edges.toArray();\n    set({ \n      nodes: nodes.map(n => ({ ...n, data: { ...n.data } })), \n      edges \n    });\n  },\n}));\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAUA;;;;AAeO,MAAM,WAAW,IAAA,kJAAM,EAAW,CAAC,KAAK,MAAQ,CAAC;QACtD,OAAO,EAAE;QACT,OAAO,EAAE;QACT,eAAe,CAAC;YACd,MAAM,eAAe,IAAA,6LAAgB,EAAC,SAAS,MAAM,KAAK;YAC1D,IAAI;gBAAE,OAAO;YAAa;YAE1B,gBAAgB;YAChB,QAAQ,OAAO,CAAC,CAAC;gBACf,IAAI,OAAO,IAAI,KAAK,UAAU;oBAC5B,sHAAE,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE;gBAC3B,OAAO,IAAI,OAAO,IAAI,KAAK,cAAc,OAAO,QAAQ,EAAE;oBACxD,sHAAE,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE;wBAAE,UAAU,OAAO,QAAQ;oBAAC;gBACzD;YACF;QACF;QACA,eAAe,CAAC;YACd,MAAM,eAAe,IAAA,6LAAgB,EAAC,SAAS,MAAM,KAAK;YAC1D,IAAI;gBAAE,OAAO;YAAa;YAE1B,QAAQ,OAAO,CAAC,CAAC;gBACf,IAAI,OAAO,IAAI,KAAK,UAAU;oBAC5B,sHAAE,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE;gBAC3B;YACF;QACF;QACA,WAAW,CAAC;YACV,MAAM,WAAW,IAAA,qKAAO,EAAC,YAAY,MAAM,KAAK;YAChD,IAAI;gBAAE,OAAO;YAAS;YAEtB,gEAAgE;YAChE,MAAM,aAAa,QAAQ,CAAC,SAAS,MAAM,GAAG,EAAE;YAChD,IAAI,YAAY;gBACd,sHAAE,CAAC,KAAK,CAAC,GAAG,CAAC;oBACX,IAAI,WAAW,EAAE;oBACjB,QAAQ,WAAW,MAAM;oBACzB,QAAQ,WAAW,MAAM;gBAC3B;YACF;QACF;QACA,UAAU,CAAC;YACT,IAAI;gBAAE;YAAM;QACd;QACA,UAAU,CAAC;YACT,IAAI;gBAAE;YAAM;QACd;QACA,SAAS,CAAC;YACR,IAAI;gBAAE,OAAO;uBAAI,MAAM,KAAK;oBAAE;iBAAK;YAAC;YACpC,sHAAE,CAAC,KAAK,CAAC,GAAG,CAAC;gBACX,IAAI,KAAK,EAAE;gBACX,MAAM,KAAK,IAAI,IAAI;gBACnB,UAAU,KAAK,QAAQ;gBACvB,MAAM,KAAK,IAAI;YACjB;QACF;QACA,gBAAgB,CAAC,IAAI;YACnB,IAAI;gBACF,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,OACtB,KAAK,EAAE,KAAK,KAAK;wBAAE,GAAG,IAAI;wBAAE,MAAM;4BAAE,GAAG,KAAK,IAAI;4BAAE,GAAG,IAAI;wBAAC;oBAAE,IAAI;YAEpE;YACA,sHAAE,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI;gBAAE,MAAM;oBAAE,GAAG,MAAM,KAAK,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,IAAI;oBAAE,GAAG,IAAI;gBAAC;YAAS;QAC9F;QACA,UAAU;YACR,MAAM,QAAQ,MAAM,sHAAE,CAAC,KAAK,CAAC,OAAO;YACpC,MAAM,QAAQ,MAAM,sHAAE,CAAC,KAAK,CAAC,OAAO;YACpC,IAAI;gBACF,OAAO,MAAM,GAAG,CAAC,CAAA,IAAK,CAAC;wBAAE,GAAG,CAAC;wBAAE,MAAM;4BAAE,GAAG,EAAE,IAAI;wBAAC;oBAAE,CAAC;gBACpD;YACF;QACF;IACF,CAAC"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/components/ThoughtNode.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { Handle, Position, type NodeProps, type Node } from '@xyflow/react';\nimport ReactMarkdown from 'react-markdown';\nimport { useStore } from '@/lib/store';\n\nexport type ThoughtNodeData = {\n  label: string;\n  content?: string;\n};\n\nconst ThoughtNode = ({ id, data }: NodeProps<Node<ThoughtNodeData>>) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const updateNodeData = useStore((s) => s.updateNodeData);\n\n  const handleDoubleClick = () => {\n    setIsEditing(true);\n  };\n\n  const handleBlur = () => {\n    setIsEditing(false);\n  };\n\n  const handleChange = (evt: React.ChangeEvent<HTMLTextAreaElement>) => {\n    updateNodeData(id, { content: evt.target.value });\n  };\n\n  const handleLabelChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    updateNodeData(id, { label: evt.target.value });\n  };\n\n  return (\n    <div className=\"px-4 py-2 shadow-md rounded-md bg-white border-2 border-stone-400 min-w-[150px] text-black\">\n      <Handle type=\"target\" position={Position.Top} className=\"w-16 !bg-teal-500\" />\n      \n      <div className=\"flex flex-col text-black\">\n        {isEditing ? (\n          <>\n            <input\n              className=\"font-bold border-b mb-2 focus:outline-none text-black\"\n              value={data.label}\n              onChange={handleLabelChange}\n              autoFocus\n            />\n            <textarea\n              className=\"text-xs border rounded p-1 focus:outline-none min-h-[100px] text-black\"\n              value={data.content || ''}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n          </>\n        ) : (\n          <div onDoubleClick={handleDoubleClick} className=\"text-black\">\n            <div className=\"font-bold border-b mb-2 text-black\">{data.label}</div>\n            <div className=\"text-xs prose prose-slate max-w-none text-black\">\n              <ReactMarkdown>{data.content || 'Double click to edit...'}</ReactMarkdown>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <Handle type=\"source\" position={Position.Bottom} className=\"w-16 !bg-teal-500\" />\n    </div>\n  );\n};\n\nexport default ThoughtNode;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AALA;;;;;;AAYA,MAAM,cAAc,CAAC,EAAE,EAAE,EAAE,IAAI,EAAoC;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,iBAAiB,IAAA,+HAAQ,EAAC,CAAC,IAAM,EAAE,cAAc;IAEvD,MAAM,oBAAoB;QACxB,aAAa;IACf;IAEA,MAAM,aAAa;QACjB,aAAa;IACf;IAEA,MAAM,eAAe,CAAC;QACpB,eAAe,IAAI;YAAE,SAAS,IAAI,MAAM,CAAC,KAAK;QAAC;IACjD;IAEA,MAAM,oBAAoB,CAAC;QACzB,eAAe,IAAI;YAAE,OAAO,IAAI,MAAM,CAAC,KAAK;QAAC;IAC/C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,mLAAM;gBAAC,MAAK;gBAAS,UAAU,sKAAQ,CAAC,GAAG;gBAAE,WAAU;;;;;;0BAExD,8OAAC;gBAAI,WAAU;0BACZ,0BACC;;sCACE,8OAAC;4BACC,WAAU;4BACV,OAAO,KAAK,KAAK;4BACjB,UAAU;4BACV,SAAS;;;;;;sCAEX,8OAAC;4BACC,WAAU;4BACV,OAAO,KAAK,OAAO,IAAI;4BACvB,UAAU;4BACV,QAAQ;;;;;;;iDAIZ,8OAAC;oBAAI,eAAe;oBAAmB,WAAU;;sCAC/C,8OAAC;4BAAI,WAAU;sCAAsC,KAAK,KAAK;;;;;;sCAC/D,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,mMAAa;0CAAE,KAAK,OAAO,IAAI;;;;;;;;;;;;;;;;;;;;;;0BAMxC,8OAAC,mLAAM;gBAAC,MAAK;gBAAS,UAAU,sKAAQ,CAAC,MAAM;gBAAE,WAAU;;;;;;;;;;;;AAGjE;uCAEe"}},
    {"offset": {"line": 335, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/layout.ts"],"sourcesContent":["import { forceSimulation, forceLink, forceManyBody, forceCenter } from 'd3-force';\nimport { type Node, type Edge } from '@xyflow/react';\n\nexport const runLayout = (nodes: Node[], edges: Edge[]) => {\n  const simulationNodes = nodes.map((n) => ({ ...n, x: n.position.x, y: n.position.y }));\n  const simulationLinks = edges.map((e) => ({ ...e, source: e.source, target: e.target }));\n\n  const simulation = forceSimulation(simulationNodes as any)\n    .force('link', forceLink(simulationLinks).id((d: any) => d.id).distance(100))\n    .force('charge', forceManyBody().strength(-300))\n    .force('center', forceCenter(200, 200))\n    .stop();\n\n  // Run simulation for a fixed number of ticks\n  for (let i = 0; i < 300; ++i) simulation.tick();\n\n  return nodes.map((n, i) => ({\n    ...n,\n    position: {\n      x: (simulationNodes[i] as any).x,\n      y: (simulationNodes[i] as any).y,\n    },\n  }));\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;;AAGO,MAAM,YAAY,CAAC,OAAe;IACvC,MAAM,kBAAkB,MAAM,GAAG,CAAC,CAAC,IAAM,CAAC;YAAE,GAAG,CAAC;YAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;YAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;QAAC,CAAC;IACpF,MAAM,kBAAkB,MAAM,GAAG,CAAC,CAAC,IAAM,CAAC;YAAE,GAAG,CAAC;YAAE,QAAQ,EAAE,MAAM;YAAE,QAAQ,EAAE,MAAM;QAAC,CAAC;IAEtF,MAAM,aAAa,IAAA,iNAAe,EAAC,iBAChC,KAAK,CAAC,QAAQ,IAAA,+LAAS,EAAC,iBAAiB,EAAE,CAAC,CAAC,IAAW,EAAE,EAAE,EAAE,QAAQ,CAAC,MACvE,KAAK,CAAC,UAAU,IAAA,2MAAa,IAAG,QAAQ,CAAC,CAAC,MAC1C,KAAK,CAAC,UAAU,IAAA,qMAAW,EAAC,KAAK,MACjC,IAAI;IAEP,6CAA6C;IAC7C,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,EAAE,EAAG,WAAW,IAAI;IAE7C,OAAO,MAAM,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC;YAC1B,GAAG,CAAC;YACJ,UAAU;gBACR,GAAG,AAAC,eAAe,CAAC,EAAE,CAAS,CAAC;gBAChC,GAAG,AAAC,eAAe,CAAC,EAAE,CAAS,CAAC;YAClC;QACF,CAAC;AACH"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/components/Canvas.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect } from 'react';\nimport {\n  ReactFlow,\n  Background,\n  Controls,\n  Panel,\n} from '@xyflow/react';\nimport '@xyflow/react/dist/style.css';\nimport { useStore } from '@/lib/store';\nimport ThoughtNode from './ThoughtNode';\nimport { runLayout } from '@/lib/layout';\n\nconst nodeTypes = {\n  thought: ThoughtNode,\n};\n\nconst Canvas: React.FC = () => {\n  const {\n    nodes,\n    edges,\n    onNodesChange,\n    onEdgesChange,\n    onConnect,\n    addNode,\n    setNodes,\n    loadData,\n  } = useStore();\n\n  useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  const handleAddNode = () => {\n    const id = Date.now().toString();\n    const newNode = {\n      id,\n      position: { x: Math.random() * 400, y: Math.random() * 400 },\n      data: { label: `Thought ${id}`, content: '' },\n      type: 'thought',\n    };\n    addNode(newNode);\n  };\n\n  const handleLayout = () => {\n    const layoutedNodes = runLayout(nodes, edges);\n    setNodes(layoutedNodes);\n  };\n\n  return (\n    <div style={{ width: '100vw', height: '100vh' }} data-testid=\"rf__wrapper\">\n      <ReactFlow\n        nodes={nodes}\n        edges={edges}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onConnect={onConnect}\n        nodeTypes={nodeTypes}\n        fitView\n      >\n        <Background />\n        <Controls />\n        <Panel position=\"top-right\">\n          <div className=\"flex flex-col gap-2 bg-white p-2 border rounded shadow\">\n            <button\n              onClick={handleAddNode}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors\"\n            >\n              Add Thought\n            </button>\n            <button\n              onClick={handleLayout}\n              className=\"bg-stone-500 text-white px-4 py-2 rounded hover:bg-stone-600 transition-colors\"\n            >\n              Auto Layout\n            </button>\n          </div>\n        </Panel>\n      </ReactFlow>\n    </div>\n  );\n};\n\nexport default Canvas;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAOA;AACA;AACA;AAZA;;;;;;;;AAcA,MAAM,YAAY;IAChB,SAAS,4IAAW;AACtB;AAEA,MAAM,SAAmB;IACvB,MAAM,EACJ,KAAK,EACL,KAAK,EACL,aAAa,EACb,aAAa,EACb,SAAS,EACT,OAAO,EACP,QAAQ,EACR,QAAQ,EACT,GAAG,IAAA,+HAAQ;IAEZ,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,gBAAgB;QACpB,MAAM,KAAK,KAAK,GAAG,GAAG,QAAQ;QAC9B,MAAM,UAAU;YACd;YACA,UAAU;gBAAE,GAAG,KAAK,MAAM,KAAK;gBAAK,GAAG,KAAK,MAAM,KAAK;YAAI;YAC3D,MAAM;gBAAE,OAAO,CAAC,QAAQ,EAAE,IAAI;gBAAE,SAAS;YAAG;YAC5C,MAAM;QACR;QACA,QAAQ;IACV;IAEA,MAAM,eAAe;QACnB,MAAM,gBAAgB,IAAA,iIAAS,EAAC,OAAO;QACvC,SAAS;IACX;IAEA,qBACE,8OAAC;QAAI,OAAO;YAAE,OAAO;YAAS,QAAQ;QAAQ;QAAG,eAAY;kBAC3D,cAAA,8OAAC,sLAAS;YACR,OAAO;YACP,OAAO;YACP,eAAe;YACf,eAAe;YACf,WAAW;YACX,WAAW;YACX,OAAO;;8BAEP,8OAAC,uLAAU;;;;;8BACX,8OAAC,qLAAQ;;;;;8BACT,8OAAC,kLAAK;oBAAC,UAAS;8BACd,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;0CAGD,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb;uCAEe"}}]
}