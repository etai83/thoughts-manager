{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/db.ts"],"sourcesContent":["import Dexie, { type EntityTable } from 'dexie';\n\nexport interface Node {\n  id: string;\n  type: string;\n  position: { x: number; y: number };\n  data: { label: string; content?: string };\n}\n\nexport interface Edge {\n  id: string;\n  source: string;\n  target: string;\n  label?: string;\n}\n\nconst db = new Dexie('ThoughtsManagerDB') as Dexie & {\n  nodes: EntityTable<Node, 'id'>;\n  edges: EntityTable<Edge, 'id'>;\n};\n\n// Schema declaration:\ndb.version(1).stores({\n  nodes: 'id, type', // primary key \"id\" (for nodes)\n  edges: 'id, source, target' // primary key \"id\" (for edges)\n});\n\nexport { db };\n"],"names":[],"mappings":";;;;AAAA;;AAgBA,MAAM,KAAK,IAAI,sJAAK,CAAC;AAKrB,sBAAsB;AACtB,GAAG,OAAO,CAAC,GAAG,MAAM,CAAC;IACnB,OAAO;IACP,OAAO,qBAAqB,+BAA+B;AAC7D"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/lib/store.ts"],"sourcesContent":["import { create } from 'zustand';\nimport {\n  type Node,\n  type Edge,\n  type OnNodesChange,\n  type OnEdgesChange,\n  type OnConnect,\n  applyNodeChanges,\n  applyEdgeChanges,\n  addEdge,\n} from '@xyflow/react';\nimport { db } from './db';\n\nexport type AppState = {\n  nodes: Node[];\n  edges: Edge[];\n  onNodesChange: OnNodesChange;\n  onEdgesChange: OnEdgesChange;\n  onConnect: OnConnect;\n  setNodes: (nodes: Node[]) => void;\n  setEdges: (edges: Edge[]) => void;\n  addNode: (node: Node) => void;\n  loadData: () => Promise<void>;\n};\n\nexport const useStore = create<AppState>((set, get) => ({\n  nodes: [],\n  edges: [],\n  onNodesChange: (changes) => {\n    const updatedNodes = applyNodeChanges(changes, get().nodes);\n    set({ nodes: updatedNodes });\n    \n    // Sync to Dexie\n    changes.forEach((change) => {\n      if (change.type === 'remove') {\n        db.nodes.delete(change.id);\n      } else if (change.type === 'position' && change.position) {\n        db.nodes.update(change.id, { position: change.position });\n      }\n    });\n  },\n  onEdgesChange: (changes) => {\n    const updatedEdges = applyEdgeChanges(changes, get().edges);\n    set({ edges: updatedEdges });\n    \n    changes.forEach((change) => {\n      if (change.type === 'remove') {\n        db.edges.delete(change.id);\n      }\n    });\n  },\n  onConnect: (connection) => {\n    const newEdges = addEdge(connection, get().edges);\n    set({ edges: newEdges });\n    \n    // Dexie sync - addEdge returns an array with the new edge added\n    const latestEdge = newEdges[newEdges.length - 1];\n    if (latestEdge) {\n      db.edges.add({\n        id: latestEdge.id,\n        source: latestEdge.source,\n        target: latestEdge.target,\n      });\n    }\n  },\n  setNodes: (nodes) => {\n    set({ nodes });\n  },\n  setEdges: (edges) => {\n    set({ edges });\n  },\n  addNode: (node) => {\n    set({ nodes: [...get().nodes, node] });\n    db.nodes.add({\n      id: node.id,\n      type: node.type || 'default',\n      position: node.position,\n      data: node.data as { label: string; content?: string },\n    });\n  },\n  loadData: async () => {\n    const nodes = await db.nodes.toArray();\n    const edges = await db.edges.toArray();\n    set({ \n      nodes: nodes.map(n => ({ ...n, data: { ...n.data } })), \n      edges \n    });\n  },\n}));\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAUA;;;;AAcO,MAAM,WAAW,IAAA,kJAAM,EAAW,CAAC,KAAK,MAAQ,CAAC;QACtD,OAAO,EAAE;QACT,OAAO,EAAE;QACT,eAAe,CAAC;YACd,MAAM,eAAe,IAAA,6LAAgB,EAAC,SAAS,MAAM,KAAK;YAC1D,IAAI;gBAAE,OAAO;YAAa;YAE1B,gBAAgB;YAChB,QAAQ,OAAO,CAAC,CAAC;gBACf,IAAI,OAAO,IAAI,KAAK,UAAU;oBAC5B,sHAAE,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE;gBAC3B,OAAO,IAAI,OAAO,IAAI,KAAK,cAAc,OAAO,QAAQ,EAAE;oBACxD,sHAAE,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE;wBAAE,UAAU,OAAO,QAAQ;oBAAC;gBACzD;YACF;QACF;QACA,eAAe,CAAC;YACd,MAAM,eAAe,IAAA,6LAAgB,EAAC,SAAS,MAAM,KAAK;YAC1D,IAAI;gBAAE,OAAO;YAAa;YAE1B,QAAQ,OAAO,CAAC,CAAC;gBACf,IAAI,OAAO,IAAI,KAAK,UAAU;oBAC5B,sHAAE,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE;gBAC3B;YACF;QACF;QACA,WAAW,CAAC;YACV,MAAM,WAAW,IAAA,qKAAO,EAAC,YAAY,MAAM,KAAK;YAChD,IAAI;gBAAE,OAAO;YAAS;YAEtB,gEAAgE;YAChE,MAAM,aAAa,QAAQ,CAAC,SAAS,MAAM,GAAG,EAAE;YAChD,IAAI,YAAY;gBACd,sHAAE,CAAC,KAAK,CAAC,GAAG,CAAC;oBACX,IAAI,WAAW,EAAE;oBACjB,QAAQ,WAAW,MAAM;oBACzB,QAAQ,WAAW,MAAM;gBAC3B;YACF;QACF;QACA,UAAU,CAAC;YACT,IAAI;gBAAE;YAAM;QACd;QACA,UAAU,CAAC;YACT,IAAI;gBAAE;YAAM;QACd;QACA,SAAS,CAAC;YACR,IAAI;gBAAE,OAAO;uBAAI,MAAM,KAAK;oBAAE;iBAAK;YAAC;YACpC,sHAAE,CAAC,KAAK,CAAC,GAAG,CAAC;gBACX,IAAI,KAAK,EAAE;gBACX,MAAM,KAAK,IAAI,IAAI;gBACnB,UAAU,KAAK,QAAQ;gBACvB,MAAM,KAAK,IAAI;YACjB;QACF;QACA,UAAU;YACR,MAAM,QAAQ,MAAM,sHAAE,CAAC,KAAK,CAAC,OAAO;YACpC,MAAM,QAAQ,MAAM,sHAAE,CAAC,KAAK,CAAC,OAAO;YACpC,IAAI;gBACF,OAAO,MAAM,GAAG,CAAC,CAAA,IAAK,CAAC;wBAAE,GAAG,CAAC;wBAAE,MAAM;4BAAE,GAAG,EAAE,IAAI;wBAAC;oBAAE,CAAC;gBACpD;YACF;QACF;IACF,CAAC"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/itaiharpaz/Code/ThoughtsManager/src/components/Canvas.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect } from 'react';\nimport {\n  ReactFlow,\n  Background,\n  Controls,\n  Panel,\n} from '@xyflow/react';\nimport '@xyflow/react/dist/style.css';\nimport { useStore } from '@/lib/store';\n\nconst Canvas: React.FC = () => {\n  const {\n    nodes,\n    edges,\n    onNodesChange,\n    onEdgesChange,\n    onConnect,\n    addNode,\n    loadData,\n  } = useStore();\n\n  useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  const handleAddNode = () => {\n    const id = Date.now().toString();\n    const newNode = {\n      id,\n      position: { x: Math.random() * 400, y: Math.random() * 400 },\n      data: { label: `New Thought ${id}` },\n      type: 'default',\n    };\n    addNode(newNode);\n  };\n\n  return (\n    <div style={{ width: '100vw', height: '100vh' }} data-testid=\"rf__wrapper\">\n      <ReactFlow\n        nodes={nodes}\n        edges={edges}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onConnect={onConnect}\n        fitView\n      >\n        <Background />\n        <Controls />\n        <Panel position=\"top-right\">\n          <div className=\"flex flex-col gap-2 bg-white p-2 border rounded shadow\">\n            <button\n              onClick={handleAddNode}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors\"\n            >\n              Add Thought\n            </button>\n          </div>\n        </Panel>\n      </ReactFlow>\n    </div>\n  );\n};\n\nexport default Canvas;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAOA;AAVA;;;;;;AAYA,MAAM,SAAmB;IACvB,MAAM,EACJ,KAAK,EACL,KAAK,EACL,aAAa,EACb,aAAa,EACb,SAAS,EACT,OAAO,EACP,QAAQ,EACT,GAAG,IAAA,+HAAQ;IAEZ,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,gBAAgB;QACpB,MAAM,KAAK,KAAK,GAAG,GAAG,QAAQ;QAC9B,MAAM,UAAU;YACd;YACA,UAAU;gBAAE,GAAG,KAAK,MAAM,KAAK;gBAAK,GAAG,KAAK,MAAM,KAAK;YAAI;YAC3D,MAAM;gBAAE,OAAO,CAAC,YAAY,EAAE,IAAI;YAAC;YACnC,MAAM;QACR;QACA,QAAQ;IACV;IAEA,qBACE,8OAAC;QAAI,OAAO;YAAE,OAAO;YAAS,QAAQ;QAAQ;QAAG,eAAY;kBAC3D,cAAA,8OAAC,sLAAS;YACR,OAAO;YACP,OAAO;YACP,eAAe;YACf,eAAe;YACf,WAAW;YACX,OAAO;;8BAEP,8OAAC,uLAAU;;;;;8BACX,8OAAC,qLAAQ;;;;;8BACT,8OAAC,kLAAK;oBAAC,UAAS;8BACd,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb;uCAEe"}}]
}